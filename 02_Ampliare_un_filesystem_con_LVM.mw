{{InCorso|autore=RobertMayr}}
{{Autore|RobertMayr}}

Per ampliare un filesystem che poggia su una struttura LVM si potrà svolgere tutto a caldo, senza dover forzatamente smontare i filesystem.
* Per prima cosa controllare che sul volume group a cui appartiene il logical volume da allargare, possieda lo spazio libero necessario per l'ampliamento. Lanciare un vgs e controllare che nella colonna "VFree", ci sia abbastanza spazio libero da sfruttare.

<pre>
[root@vrhel5 ~]# vgs -a
  VG         #PV #LV #SN Attr   VSize VFree
  VolGroup00   2   3   0 wz--n- 9.84G 992.00M
</pre>

* Tramite il comando lvextend allargare il filesystem per la dimensione desiderata. E' possibile allargare il Logical Volume per tutta la dimensione libera del Volume group (con -l +100%FREE), oppure di una dimensione specifica (con -L <dimensione).

<pre>
[root@vrhel5 ~]# lvs
  LV       VG         Attr   LSize   Origin Snap%  Move Log Copy%  Convert
  LogVol00 VolGroup00 -wi-ao   7.38G
  LogVol01 VolGroup00 -wi-ao 512.00M
  LogVol02 VolGroup00 -wi-ao   1.00G
[root@vrhel5 ~]# lvextend -l +100%FREE /dev/VolGroup00/LogVol02
  Extending logical volume LogVol02 to 1.97 GB
  Logical volume LogVol02 successfully resized
[root@vrhel5 ~]# lvs
  LV       VG         Attr   LSize   Origin Snap%  Move Log Copy%  Convert
  LogVol00 VolGroup00 -wi-ao   7.38G
  LogVol01 VolGroup00 -wi-ao 512.00M
  LogVol02 VolGroup00 -wi-ao   1.97G
</pre>

* Allargare la dimensione del filesystem, invocando il comando resize2fs sul filesystem da ampliare.

<pre>
[root@vrhel5 ~]# df -h
Filesystem            Size  Used Avail Use% Mounted on
/dev/mapper/VolGroup00-LogVol00 7.2G  1.6G  5.3G  23% /
/dev/mapper/VolGroup00-LogVol02 1.0G   35M  970M   10% /prova
/dev/hda1              99M   12M   82M  13% /boot
tmpfs                 125M     0  125M   0% /dev/shm
[root@vrhel5 ~]# resize2fs -p /dev/VolGroup00/LogVol02
resize2fs 1.39 (29-May-2006)
Filesystem at /dev/VolGroup00/LogVol02 is mounted on /prova; on-line resizing required
Performing an on-line resize of /dev/VolGroup00/LogVol02 to 516096 (4k) blocks.
The filesystem on /dev/VolGroup00/LogVol02 is now 516096 blocks long.
[root@vrhel5 ~]# df -h
Filesystem            Size  Used Avail Use% Mounted on
/dev/mapper/VolGroup00-LogVol00 7.2G  1.6G  5.3G  23% /
/dev/mapper/VolGroup00-LogVol02 2.0G   35M  1.9G   2% /prova
/dev/hda1              99M   12M   82M  13% /boot
tmpfs                 125M     0  125M   0% /dev/shm
</pre>

=== NOTE IMPORTANTI ===
In alcuni casi dove si svolgere un grow di un filesystem sotto stress (con un accesso in I/O molto alto durante l'attività), si potrebbe avere un blocco del sistema. Nello specifico il sistema dovrebbe non terminare le attività di resize, mantenendo il sistema in idle e un load average molto alto. Provando ad eseguire un kill del processo relativo al resize non cambierà nulla e si dovrà riavviare il sistema.<br>
E' un bug riportato https://bugzilla.redhat.com/show_bug.cgi?id=525100 e corretto nelle RHEL 5.6.

[[Categoria:Scrittura in corso]]
[[Categoria:LVM]]
{{Link/prec|01_Introduzione_a_LVM|01 Introduzione a LVM}}{{Link/succ|02_Ampliare_un_filesystem_con_LVM|02 Ampliare un filesystem con LVM}}
